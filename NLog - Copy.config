<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<targets>
		<target name="database" xsi:type="Database">
			<dbProvider>System.Data.SqlClient</dbProvider>
			<connectionString>${configsetting:name=DbConnection}</connectionString>
			<commandText>
				INSERT INTO Logs (Timestamp, Level, Message)
				VALUES (@timestamp, @level, @message);
			</commandText>
			<parameter name="@timestamp" layout="${date:universalTime=true:format=yyyy-MM-dd HH\:mm\:ss.fff}" />
			<parameter name="@level" layout="${level}" />
			<parameter name="@message" layout="${message}" />
		</target>
	</targets>
	<rules>
		<logger name="*" minlevel="Trace" writeTo="database" />
	</rules>
</nlog>